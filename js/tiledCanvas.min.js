function TiledCanvas(a){if((this instanceof TiledCanvas)===false){return new TiledCanvas(a)}function b(j,i,l,g,m){if((this instanceof b)===false){return new b(j,i,l,g)}var k=document.createElement("canvas"),h=k.getContext("2d");l=parseInt(l,10);g=parseInt(g,10);j=parseInt(j,10);i=parseInt(i,10);m=parseInt(m,10);if(l<=0||g<=0){throw new Error("Width and height of canvas tile must be positive")}k.setAttribute("width",l);k.setAttribute("height",g);k.style.width=l+"px";k.style.height=g+"px";k.style.position="absolute";k.style.padding=0;k.style.left=j+"px";k.style.top=i+"px";k.style.zIndex=m;this.drawImage=function(t,p,s,r,o,v,u,n,q){if(v===undefined&&u===undefined&&n===undefined&&q===undefined){p-=v;s-=u}else{v-=v;u-=u}h.drawImage(t,p,s,r,o,v,u,n,q)};this.getCanvas=function(){return k};this.getCtx=function(){return h}}function f(h,g,n,o,m){if((this instanceof f)===false){return new f(h,g,n,o,m)}if((h instanceof HTMLElement)===false){throw new Error("Container must be an instance of HTMLElement")}if(typeof g!=="string"||g.length===0){throw new Error("Invalid name of the Layer: "+g)}if(o===undefined){o=100}if(m===undefined){m=100}n=parseInt(n,10);o=parseInt(o,10);m=parseInt(m,10);if(o<=0||m<=0){throw new Error("Width and height of the tile must be positive")}if(h.style.position==="static"||h.style.position===""){h.style.position="relative"}h.style.overflow="hidden";var s={x:Math.ceil(h.clientWidth/o),y:Math.ceil(h.clientHeight/m)},r=[],l=0,k=0,q=s.x,p=s.y;for(k=0;k<p;k++){for(l=0;l<q;l++){if(r[n]===undefined){r[n]=[]}if(r[n][k]===undefined){r[n][k]=[]}if(r[n][k][l]===undefined){r[n][k][l]=[]}r[n][k][l]=new b(l*o,k*m,o,m,n);h.appendChild(r[n][k][l].getCanvas())}}this.destroy=function(){for(k=0;k<p;k++){for(l=0;l<q;l++){if(r[n]===undefined){r[n]=[]}if(r[n][k]===undefined){r[n][k]=[]}if(r[n][k][l]===undefined){r[n][k][l]=[]}h.removeChild(r[n][k][l])}}};this.drawImage=function(z,t,y,x,j,B,A,i,v){var w=[0,0],u=[0,0];if(B===undefined&&A===undefined&&i===undefined&&v===undefined){}else{}}}if((a instanceof HTMLElement)===false){throw new Error("Container must be an instance of HTMLElement")}var d={},e={tile:{width:100,height:100}},c=0;this.addLayer=function(h,j,i,g){if(typeof h!=="string"||h.length===0){throw new Error("Invalid name of the Layer: "+h)}if((d[h] instanceof f)===true){d[h].destroy();delete d[h]}if(j===undefined){c+=1;j=c}else{j=parseInt(j,10);if(c<j){c=j}}d[h]=new f(a,h,j,(i===undefined)?e.tile.width:i,(g===undefined)?e.tile.height:g);return this};this.getLayer=function(g){return((d[g] instanceof f)===false)?d:layer[g]}};